<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="templates/mainTemplate">
	
	<head>
		<title th:text="#{TITULO_MAIN_PAGE}" layout:title-pattern="$DECORATOR_TITLE - $CONTENT_TITLE"></title>
	
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="-1" />
		<meta name="viewport" content="width=device-width, initial-scale=1"/>	
		<meta name="_token" th:content="${session._token}"></meta>
		<meta th:if="${_csrf != null}" name="_csrf" th:content="${_csrf.token}"></meta> 
	   	<meta th:if="${_csrf != null}" name="_csrf_header" th:content="${_csrf.headerName}"></meta>   	
	   	
	   	<link  th:href="@{/recursos/image/ico/favicon.ico}" rel="icon"  type="image/x-icon" />
		<link  th:href="@{/recursos/image/ico/favicon.ico}" rel="shortcut icon"  type="image/x-icon"/>
		<link rel="stylesheet" th:href="@{/recursos/assets/bootstrap_3.3.7/css/bootstrap.min.css}" />	
		<link rel="stylesheet" th:href="@{/recursos/assets/font-awesome-4.7.0/css/font-awesome.min.css}" />	
		<link rel="stylesheet" th:href="@{/recursos/assets/bootstrap_dialog/css/bootstrap-dialog.min.css}" />
		<link rel="stylesheet" th:href="@{/recursos/assets/date-picker/style/jquery-ui.css}" />
		<th:block th:inline="text" layout:fragment="includeCSS"></th:block>
		<link rel="stylesheet" th:href="@{/recursos/css/styles.css}" />	
	</head>
	
	<body>
		<header>
			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<div class="logos">
							<div class="logo-segob"></div>
							<div class="logo-control"></div>
						</div>
					</div>
				</div>
			</div>
		</header>
		<th:block layout:fragment="content"  th:remove="tag">
		<div class="main-page">
			<div class="container">
				<div class="row">
				
					<ul class="nav nav-tabs" id="tabs" role="tablist">
						<li class="nav-item active">
							<a class="nav-link" id="asistencias-tab" data-toggle="tab" href="#asistencias" role="tab" aria-controls="asistencias" aria-selected="true">Asistencias</a>
						</li>
						
<!-- 						<li class="nav-item"> -->
<!-- 					  	   <a class="nav-link"         id="buscar-tab" data-toggle="tab" href="#buscar" role="tab" aria-controls="buscar" aria-selected="false">Buscar</a> -->
<!-- 					    </li> -->
					</ul>
					
					<!-- Tab panes -->
					<div class="tab-content">
						
						<!-- buscar -->
						<div class="tab-pane active" id="asistencias" role="tabpanel" aria-labelledby="asistencias-tab">
							<div class="card">
							
								<div class="asistenciaForm form-group">
									<form th:action="@{/asistencia/busca}" method="get">
										<div class="row">	
											<div class="col-md-12">
												<div class="form-group">
									                <div class='input-group date'>
									                	<p>Fecha Inicial</p>
									                    <input type='text' class="form-control input-small input-calendar" id="validBeforeDatepicker" name="fechaInicial" autocomplete="off" th:required="required"/>
									                </div>
									            </div>
									            <div class="form-group">
									                <div class='input-group date'>
									                	<p>Fecha Final</p>
									                    <input type='text' class="form-control input-small input-calendar" id="validAfterDatepicker" name="fechaFinal" autocomplete="off" th:required="required"/>
									                </div>
									            </div>
								            </div>
								        </div>
								        <div class="row">
											<div class="col-md-12">
												<p class="text-right">
													<button class="btn btn-default">Buscar</button>
												</p>
											</div>
										</div>
 									</form>
					            </div>
					            
					        	<hr/>

								<div class="filterable">
									<h1 class="ico-incidencias"><span class="input-clock"></span> Asistencias 
					       				<button class="btn btn-default btn-xs btn-filter pull-right"><span class="glyphicon glyphicon-filter"></span></button>
					       			</h1>
									<table id="tableAsistencias" class="table table-striped table-text-center">
										<thead>
											<tr class="filters">
												<th><input type="text" class="form-control" placeholder="Asistencia" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="No. de empleado" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Nombre" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Nivel" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="U. A." th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Fecha" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Tipo" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Estado" th:disabled="true"/></th>
												<th><input type="text" class="form-control" placeholder="Detalle" th:disabled="true"/></th>
											</tr>
										</thead>
										<tbody>
											<tr th:each="asistencia : ${listaAsistencia}">
												<td id="idAsistencia" th:text="${asistencia.idAsistencia}"></td>
												<td th:text="${asistencia.usuario.claveUsuario}"></td>
												<td th:text="${asistencia.usuario.nombre + ' ' + asistencia.usuario.apellidoPaterno + ' ' + asistencia.usuario.apellidoMaterno}"></td>
												<td th:text="${asistencia.usuario.clavePerfil.descripcion}"></td>
												<td th:text="Mapear"></td>
												<td th:text="${asistencia.entrada}"></td>
												<td th:text="${asistencia.idTipoDia.nombre}"></td>
												<td th:text="what"></td>
												<td> 
													<a th:href="@{/asistencia/buscaId/(id=${asistencia.idAsistencia})}" class="nBtn">Justifica</a>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						
						<!-- tab buscar -->
<!-- 						<div class="tab-pane" id="buscar" role="tabpanel" aria-labelledby="buscar-tab"> -->
<!-- 							<div class="card"> -->
<!-- 								<div class="row"> -->
<!-- 									<div class="col-md-12"> -->
<!-- 										<h1 class="ico-incidencias">Buscar Asistencia por fecha</h1> -->
<!-- 									</div> -->
<!-- 								</div> -->

								
<!-- 							</div> -->
<!-- 						</div> -->
					</div>
				</div>
			</div>
		</div>	
		
		
		<!-- modal para agregar justificaciÃ³n -->
		<div class="justificaForm">
      		<form>
				<div class="modal fade" id="justificaModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
					    	<div class="modal-header">
					      		<h3 class="modal-title" id="exampleModalLabel" th:text="Justifica"></h3>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								 </button>
						    </div>
					    	<div class="modal-body">
					    		<div class="form-group">
						        	<label for="id" class="col-form-label" th:text="Id"></label>
						            <input type="text" class="form-control" id="id" name="id" th:readonly="true"/>
						        </div>
						        <div class="form-group">
						        	<label for="fecha" class="col-form-label" th:text="Fecha"></label>
						            <input type="text" class="form-control" id="fecha" name="fecha" th:readonly="true"/>
						        </div>
						        <div class="form-group">
						        	<label for="tipo" class="col-form-label" th:text="Tipo"></label>
						            <input type="text" class="form-control" id="tipoDia" name="tipoDia" th:readonly="true"/>
						        </div>
						        <div class="form-group">
						        	<label for="observacion" class="col-form-label" th:text="Comentario"></label>
						            <textarea class="form-control" rows="5" id="observacion" name="observacion"></textarea>
						        </div>
					    	</div>
						    <div class="modal-footer">
			    				<button type="button" class="btn btn-secondary" data-dismiss="modal" th:text="#{COMUN.CANCELAR}"></button>
						    	<input type="submit" class="btn btn-primary" th:value="#{COMUN.GUARDAR}" />
						    </div>
					  	</div>
					</div>
				</div>
     		</form>
    	</div>
			
		</th:block>
		
		<th:block th:inline="text" layout:fragment="includeCSS"></th:block>
	
		<th:block th:inline="text" layout:fragment="includeScript">
			<script charset="utf-8" th:src="@{/recursos/assets/bootstrap_dialog/js/bootstrap-dialog.min.js}"></script>
			<script charset="utf-8" th:src="@{/recursos/assets/datatables/dataTables-1.10.12/js/jquery.dataTables.min.js}"></script>
	        <script charset="utf-8" th:src="@{/recursos/assets/datatables/dataTables-1.10.12/js/dataTables.bootstrap.min.js}"></script>
	        <script charset="utf-8" th:src="@{/recursos/assets/datatables/responsive-2.1.0/js/dataTables.responsive.min.js}"></script>
	        <script charset="utf-8" th:src="@{/recursos/assets/date-picker/script/jquery-ui-datepicker.js}"></script>
	        <script charset="utf-8" th:src="@{/recursos/script/comun/moduloDatatable.js}"></script>
	        <script charset="utf-8" th:src="@{/recursos/script/asistencia/asistencia.js}"></script>	 
		</th:block>
		
	</body>
</html>